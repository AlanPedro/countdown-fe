(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(43),s=n.n(c),u=n(16),i=n(12),o=n(13),p=n(17),l=n(14),d=n(18),m=n(21),f=n(22),E=(n(57),n(15)),b=n.n(E),h=function(e){var t=e.children,n=e.weight,a="countdown-text "+(void 0!==n?n:" ");return r.a.createElement("span",{className:a},t)},v={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",0:"Sunday"},S={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},g=n(45),k=n.n(g),w=n(19),O=w.b.div({rest:{y:function(e){return-e.offset},transition:{duration:1e3}}}),x=function(e){var t=e.teams,n=e.current,a=new Date,c=t.findIndex(function(e){return e.name===n.team});return r.a.createElement("div",{className:"standup-page__side-bar"},r.a.createElement("h3",{className:"date"},v[a.getDay()],r.a.createElement("br",null),r.a.createElement("span",{className:"light"},function(e){return"".concat(e.getDate()," of ").concat(S[e.getMonth()])}(a))),r.a.createElement("div",{className:"participants-wrapper-wrapper"},r.a.createElement("div",{className:"participants-wrapper"},r.a.createElement("hr",{className:"participants__hr"}),r.a.createElement("div",{className:"participant abs active highlighter"}),r.a.createElement(O,{pose:"rest",offset:73*c,poseKey:c},t.map(function(e){var t=n.team===e.name?"participant active":"participant";return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement("div",{className:t},r.a.createElement("img",{src:k.a,alt:"jez",className:"participant__img"}),r.a.createElement("div",{className:"participant__text"},r.a.createElement(h,{weight:"bold"},e.name),r.a.createElement(h,null,e.speaker)),r.a.createElement("div",{className:"participant__circles"},r.a.createElement("span",{className:"circle"}),r.a.createElement("span",{className:"circle"}),r.a.createElement("span",{className:"circle"}))),r.a.createElement("hr",{className:"participants__hr"}))})))))},y=(n(60),w.b.div({passTime:{width:function(e){var t=e.timePassed;return"".concat(t,"%")},transition:{ease:"linear",duration:1e3}}})),N=function(e){var t=e.allocation,n=e.timeLeft;return r.a.createElement("div",{className:"loading-bar"},r.a.createElement(y,{className:"filler",timePassed:n/t*100,pose:"passTime",poseKey:n}))};N.defaultProps={percentage:0};var j=N,A=function(e){var t=e.time;return r.a.createElement("div",{className:"timer"},r.a.createElement("h1",null,t))},_=(n(62),"duck/standup/INITIALISE"),T="duck/standup/JOIN",L="duck/standup/LOAD",I="duck/standup/ERROR_INITIALISING",P="duck/standup/START",D="duck/standup/UPDATE",R="duck/standup/PAUSE";var U={getAllStandups:function(){return{type:"duck/standup/GET_ALL"}},initialiseStandup:function(e){return{type:_,payload:{standup:e}}},loadStandup:function(e){return{type:L,payload:{name:e}}},errorInitialisingStandup:function(e,t){return{type:I,payload:{id:e,message:t}}},startStandup:function(){return{type:P}},updateStandup:function(e){return{type:D,payload:{standup:e}}},pauseStandup:function(){return{type:R}},toNextSpeaker:function(){return{type:"duck/standup/NEXT_SPEAKER"}},joinStandup:function(e){return{type:T,payload:{name:e}}}},C={GET_ALL:"duck/standup/GET_ALL",GET_BY_NAME:"duck/standup/GET_BY_NAME",INITIALISE:_,JOIN:T,LOAD:L,ERROR_INITIALISING:I,START:P,UPDATE:D,PAUSE:R,NEXT_SPEAKER:"duck/standup/NEXT_SPEAKER",RESET:"duck/standup/RESET"},G=(n(64),function(e){var t="circle large-btn ".concat(e.className);return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:t},e.children)});G.defaultProps={className:" ",children:"Click me!",disabled:!1};var F,W=G,J=function(e){return r.a.createElement(m.b,{to:e.to,className:e.className},r.a.createElement(W,null,"Go back"))},M=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(p.a)(this,Object(l.a)(t).call(this,e))).componentDidMount=function(){n.updateWindowDimensions(),n.props.joinStandup(n.props.match.params.name),window.addEventListener("resize",n.updateWindowDimensions),window.onpopstate=function(e){return n.componentWillUnmount}},n.componentWillUnmount=function(){n.props.leaveStandup(n.props.match.params.name),window.removeEventListener("resize",n.updateWindowDimensions)},n.updateWindowDimensions=function(){return n.setState({window:{width:window.innerWidth,height:window.innerHeight}})},n.renderTimer=function(e){return e<=10?r.a.createElement(A,{time:e}):r.a.createElement(r.a.Fragment,null)},n.state={window:{height:0,width:0}},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.standup;return b.a.isEmpty(e.teams)?r.a.createElement("div",null," Hi "):r.a.createElement("div",{className:"standup-page"},r.a.createElement(J,{className:"abs back-btn",to:"/"}),r.a.createElement(x,{teams:e.teams,current:{team:e.currentTeam,speaker:e.currentSpeaker}}),r.a.createElement("div",{className:"standup-page__main-view"},r.a.createElement(j,{allocation:e.teams.find(function(t){return t.name===e.currentTeam}).allocationInSeconds,timeLeft:e.time}),r.a.createElement("h1",{className:"title"},e.name),r.a.createElement("div",{className:"speaker"},r.a.createElement("h1",null,e.currentTeam),r.a.createElement("h2",null,e.currentSpeaker),this.renderTimer(e.time))),!e.live&&r.a.createElement("div",{className:"standup-off-fg"},r.a.createElement("div",{className:"refresh-container"},r.a.createElement("h1",null,"Standup is not live!"),r.a.createElement("button",{value:"Refresh Page",onClick:function(){return window.location.reload()}},"Refresh page"))))}}]),t}(r.a.Component),B=Object(u.b)(function(e){return{standup:e.standup}},function(e){return{joinStandup:function(t){return e(U.joinStandup(t))},leaveStandup:function(t){return e({type:"LEAVE_STANDUP"})}}})(M),K=(n(78),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(p.a)(this,Object(l.a)(t).call(this,e))).componentDidMount=function(){return n.props.initialiseStandup(n.props.match.params.name)},n.renderButtons=function(){var e=n.state.started?n.state.paused?r.a.createElement(W,{disabled:!0,onClick:n.pause},"PAUSE"):r.a.createElement(W,{onClick:n.pause},"PAUSE"):r.a.createElement(W,{onClick:n.start},"START");return r.a.createElement(r.a.Fragment,null,e,r.a.createElement(W,{onClick:n.next},"NEXT"))},n.start=function(){n.setState({paused:!1,started:!0}),n.props.startStandup()},n.pause=function(){n.setState({paused:!0}),n.props.pauseStandup()},n.next=function(){n.setState({paused:!1}),n.props.nextSpeaker()},n.state={paused:!0,started:!1},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.standup;if(console.log(this.props),b.a.isEmpty(e))return r.a.createElement("div",null,"Hi");var t=e.teams,n=e.currentTeam,a=e.currentSpeaker,c=t.slice(t.findIndex(function(e){return n===e.name})+1);return r.a.createElement("div",{className:"admin-page"},r.a.createElement(J,{className:"abs back-btn",to:"/"}),r.a.createElement("h1",{className:"admin-page__name"},e.name),r.a.createElement("h2",{className:"admin-page__timer"},e.time),r.a.createElement("h2",{className:"admin-page__current"},n," - ",a),r.a.createElement("div",{className:"admin-page__next-teams"},r.a.createElement(w.a,null,c.map(function(e){return r.a.createElement(X,{key:e.name,className:"next-teams__team"},r.a.createElement("h3",null,e.name))}))),r.a.createElement("div",{className:"admin-page__buttons"},this.renderButtons()))}}]),t}(a.Component)),X=w.b.div({enter:{opacity:1},exit:{opacity:0}}),V=Object(u.b)(function(e){return{standup:e.standup}},function(e){return{initialiseStandup:function(t){return e(U.loadStandup(t))},startStandup:function(){return e(U.startStandup())},pauseStandup:function(){return e(U.pauseStandup())},nextSpeaker:function(){return e(U.toNextSpeaker())}}})(K),z=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllStandups()}},{key:"render",value:function(){var e=this.props.standups;return b.a.isEmpty(e)?r.a.createElement("div",null,"hiads"):r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},e.map(function(e){return r.a.createElement(m.b,{key:e,to:"/standups/".concat(e)},r.a.createElement(W,null,e))}))}}]),t}(a.Component),H=Object(u.b)(function(e){return{standups:e.availableStandups}},function(e){return{getAllStandups:function(){return e(U.getAllStandups())}}})(z),Y=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/countdown-fe/standups/:name/admin",component:V}),r.a.createElement(f.a,{path:"/countdown-fe/standups/:name",component:B}),r.a.createElement(f.a,{path:"/countdown-fe/",exact:!0,component:H})))}}]),t}(a.Component),$=n(5),q=n.n($),Q=n(11),Z=n(47),ee=n.n(Z),te=n(29),ne=n(4),ae=n(33),re=n.n(ae),ce="ws://".concat("192.168.1.215:9000"),se="http://".concat("192.168.1.215:9000"),ue={getStandupByName:function(e){return re.a.get(se+"/standups/"+e).then(function(e){return e.data}).catch(function(e){throw new Error("Unable to retrieve standup")})},getAllStandups:function(){return re.a.get(se+"/standups").then(function(e){return e.data}).catch(function(e){return console.log(e)})}},ie=q.a.mark(ge),oe=q.a.mark(ke),pe=q.a.mark(we),le=q.a.mark(Oe),de=q.a.mark(xe),me=q.a.mark(ye),fe=q.a.mark(Ne),Ee=ce,be=function(e){return"".concat(Ee,"/admin/standups/").concat(e,"/start")},he=function(e){return"".concat(Ee,"/client/standups/").concat(e,"/status")},ve=function(e){var t=new WebSocket(e);return F=t,new Promise(function(e){t.onopen=function(){return e(t)}})},Se=function(e){return Object(te.b)(function(t){return e.onmessage=function(e){return t(e)},function(){return e.close}})};function ge(){var e,t;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(ne.g)(C.JOIN);case 3:return e=n.sent,n.next=6,Object(ne.e)(ke,e.payload.name);case 6:return t=n.sent,n.next=9,Object(ne.g)("LEAVE_STANDUP");case 9:return n.next=11,Object(ne.c)(t);case 11:n.next=0;break;case 13:case"end":return n.stop()}},ie,this)}function ke(e){var t,n,a;return q.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ne.b)(we,e);case 3:if(!(t=r.sent)){r.next=15;break}return r.next=7,Object(ne.f)(U.initialiseStandup(t));case 7:return r.next=9,Object(ne.b)(ve,he(e));case 9:return n=r.sent,r.next=12,Object(ne.b)(Se,n);case 12:return a=r.sent,r.next=15,Object(ne.e)(xe,a);case 15:return r.prev=15,r.next=18,Object(ne.d)();case 18:if(!r.sent){r.next=20;break}console.log("LEFT STANDUP");case 20:return r.finish(15);case 21:case"end":return r.stop()}},oe,this,[[0,,15,21]])}function we(e){var t;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ne.b)(ue.getStandupByName,e);case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,Object(ne.f)(U.errorInitialisingStandup(e,n.t0.message));case 11:case"end":return n.stop()}},pe,this,[[0,7]])}function Oe(){var e,t,n,a;return q.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(ne.g)(C.LOAD);case 2:return e=r.sent,r.next=5,Object(ne.b)(we,e.payload.name);case 5:if(!(t=r.sent)){r.next=20;break}return r.next=9,Object(ne.f)(U.initialiseStandup(t));case 9:return r.next=11,Object(ne.b)(ve,be(e.payload.name));case 11:return n=r.sent,r.next=14,Object(ne.b)(Se,n);case 14:return a=r.sent,r.next=17,Object(ne.g)(C.START);case 17:return n.send("start"),r.next=20,Object(ne.e)(xe,a);case 20:case"end":return r.stop()}},le,this)}function xe(e){var t,n;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(ne.g)(e);case 3:if(t=a.sent,(n=JSON.parse(t.data)).message){a.next=10;break}return a.next=8,Object(ne.f)(U.updateStandup(n));case 8:a.next=12;break;case 10:return a.next=12,Object(ne.f)({type:"LEAVE_STANDUP"});case 12:a.next=0;break;case 14:case"end":return a.stop()}},de,this)}function ye(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(ne.g)(C.PAUSE);case 3:F.send("pause"),e.next=0;break;case 6:case"end":return e.stop()}},me,this)}function Ne(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(ne.g)(C.NEXT_SPEAKER);case 3:F.send("next"),e.next=0;break;case 6:case"end":return e.stop()}},fe,this)}var je=[Oe(),ge(),ye(),Ne()],Ae=q.a.mark(Te),_e="duck/standup/GET_ALL_SUCCESS";function Te(){var e;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ne.g)(Ie.GET_ALL);case 2:return t.prev=2,t.next=5,Object(ne.b)(ue.getAllStandups);case 5:return e=t.sent,t.next=8,Object(ne.f)(Le.getAllStandupsSuccess(e));case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(2),t.next=14,Object(ne.f)(Le.getAllStandupsFailure(t.t0.message));case 14:case"end":return t.stop()}},Ae,this,[[2,10]])}var Le={getAllStandups:function(){return{type:"duck/standup/GET_ALL"}},getAllStandupsSuccess:function(e){return{type:_e,payload:{standups:e}}},getAllStandupsFailure:function(e){return{type:"duck/standup/GET_ALL_FAILURE"}}},Ie={GET_ALL:"duck/standup/GET_ALL",GET_ALL_FAILURE:"duck/standup/GET_ALL_FAILURE",GET_ALL_SUCCESS:_e},Pe=[Te()],De=Object(Q.c)({standup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:var n=t.payload.standup,a=n.teams.find(function(e){return!0});return{teams:n.teams,name:n.name,currentTeam:a.name,currentSpeaker:a.speaker,time:a.allocationInSeconds,live:!1};case D:var r=t.payload.standup,c=r.name,s=r.speaker,u=r.remainingSeconds,i=r.status;return{teams:e.teams,currentTeam:c,currentSpeaker:s,time:"paused"===i?e.time:u,name:e.name,live:!0};case I:return console.log("Error getting standup"),e;case"LEAVE_STANDUP":return b.a.merge(e,{live:!1});default:return e}},availableStandups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return console.log(t),t.payload.standups;default:return e}}}),Re=q.a.mark(Fe),Ue=Object(te.a)(),Ce=Object(Q.e)(De,Object(Q.a)(Ue,ee.a)),Ge=[].concat(je).concat(Pe);function Fe(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)(Ge);case 2:case"end":return e.stop()}},Re,this)}Ue.run(Fe);var We=Ce;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(u.a,{store:We},r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,n){e.exports=n.p+"static/media/badboii.89e1ac52.png"},48:function(e,t,n){e.exports=n(101)},57:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},78:function(e,t,n){}},[[48,2,1]]]);
//# sourceMappingURL=main.501f153a.chunk.js.map